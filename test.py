import urllib.request as req
import requests
from bs4 import BeautifulSoup
import json
url="https://www.ubereats.com/tw/store/%E7%B5%B1%E4%B8%80%E8%B6%85%E5%95%86-%E5%A4%A7%E5%B3%BD%E9%96%80%E5%B8%82/juowIQHaV-mnC7IjkUUmvQ?diningMode=DELIVERY"

# headers={
#     "Content-Type":"application/json",
#     "User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36 Edg/100.0.1185.44",
#     "cookie":"marketing_vistor_id=92842e8c-6f0f-43b9-9903-2f6b01f552c5; segmentCookie=b; utag_geo_code=TW; _ga=GA1.2.198613340.1650508528; _gcl_au=1.1.725313945.1650508528; _hjSessionUser_960703=eyJpZCI6IjNmYTEwNTE0LWRkZjUtNTZhNi1hYWM5LTUxODg3Y2NjYjY2ZCIsImNyZWF0ZWQiOjE2NTA1MDg1MjgxNjEsImV4aXN0aW5nIjp0cnVlfQ==; _scid=0110c2be-7dfa-4d04-a22d-e31b0b681b03; _sctr=1|1650470400000; dId=be9b657b-ade4-4214-b9f6-cae32dd843d8; uev2.gg=true; CONSENTMGR=c1:1%7Cc2:1%7Cc3:1%7Cc4:1%7Cc5:1%7Cc6:1%7Cc7:1%7Cc8:1%7Cc9:1%7Cc10:1%7Cc11:1%7Cc12:1%7Cc13:1%7Cc14:1%7Cc15:1%7Cts:1650509233085%7Cconsent:true; _rdt_uuid=1650509233869.d01fd790-e699-4850-88fc-7886dbb5cbe3; _ts_yjad=1650509233872; uev2.loc=%7B%22address%22%3A%7B%22address1%22%3A%22%E5%A4%A7%E5%AD%B8%E8%B7%AF200%E8%99%9F%22%2C%22address2%22%3A%22%E6%96%B0%E5%8C%97%E5%B8%82%E4%B8%89%E5%B3%BD%E5%8D%80%22%2C%22aptOrSuite%22%3A%22%22%2C%22eaterFormattedAddress%22%3A%22237%E5%8F%B0%E7%81%A3%E6%96%B0%E5%8C%97%E5%B8%82%E4%B8%89%E5%B3%BD%E5%8D%80%E5%A4%A7%E5%AD%B8%E8%B7%AF200%E8%99%9F%22%2C%22subtitle%22%3A%22%E6%96%B0%E5%8C%97%E5%B8%82%E4%B8%89%E5%B3%BD%E5%8D%80%22%2C%22title%22%3A%22%E5%A4%A7%E5%AD%B8%E8%B7%AF200%E8%99%9F%22%2C%22uuid%22%3A%22%22%7D%2C%22latitude%22%3A24.9467443%2C%22longitude%22%3A121.372428%2C%22reference%22%3A%22Ej9Oby4gMjAwLCBEYXh1ZSBSZCwgU2FueGlhIERpc3RyaWN0LCBOZXcgVGFpcGVpIENpdHksIFRhaXdhbiAyMzciURJPCjQKMgkPAJ81ChxoNBHCLKfDZID5rRoeCxDuwe6hARoUChIJYexZwYwaaDQRV7YfU46iRf4MEMgBKhQKEgmHn56bChxoNBG6E7O0d7kyxQ%22%2C%22referenceType%22%3A%22google_places%22%2C%22type%22%3A%22google_places%22%2C%22source%22%3A%22manual_auto_complete%22%2C%22addressComponents%22%3A%7B%22countryCode%22%3A%22TW%22%2C%22firstLevelSubdivisionCode%22%3A%22%E6%96%B0%E5%8C%97%E5%B8%82%22%2C%22city%22%3A%22%E4%B8%89%E5%B3%BD%E5%8D%80%22%2C%22postalCode%22%3A%22237%22%7D%2C%22originType%22%3A%22user_autocomplete%22%7D; uev2.diningMode=DELIVERY; uev2.id.xp=89440163-6259-46b0-a447-f6268b326639; uev2.id.session=856f153c-0a42-49a0-8d28-7d99b6ef4703; uev2.ts.session=1650695527033; jwt-session=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NTA2OTU1MjcsImV4cCI6MTY1MDc4MTkyN30.pFvButtwS1dOZBdtpLq8XgFiEyGBDvofnDZwC_vITsA; utm_medium=undefined; _userUuid=; utag_main=v_id:018049f9760700121152ab9895b105086005607e00978$_sn:2$_ss:0$_st:1650697332546$segment:b$optimizely_segment:b$_se:5$ses_id:1650695528737%3Bexp-session$_pn:1%3Bexp-session; ext_pgvwcount=-0.1; trdipcktrffcext=1; _gid=GA1.2.1256158869.1650695535; _gat_tealium_0=1; _uetsid=1e137420c2cf11ec883975ee81689285; _uetvid=b4953960c11b11eca511fb36af225e74",
#     "x-csrf-token": "x"}
# list_req = requests.get(url, headers=headers)

# soup = BeautifulSoup(list_req.content, "html.parser")

requestData={"storeUuid":"8eea3021-01da-57e9-a70b-b223914526bd","sfNuggetCount":65}
request=req.Request(url,headers={
    "content-type":"application/json",
    "cookie":"marketing_vistor_id=92842e8c-6f0f-43b9-9903-2f6b01f552c5; segmentCookie=b; utag_geo_code=TW; _ga=GA1.2.198613340.1650508528; _gcl_au=1.1.725313945.1650508528; _hjSessionUser_960703=eyJpZCI6IjNmYTEwNTE0LWRkZjUtNTZhNi1hYWM5LTUxODg3Y2NjYjY2ZCIsImNyZWF0ZWQiOjE2NTA1MDg1MjgxNjEsImV4aXN0aW5nIjp0cnVlfQ==; _scid=0110c2be-7dfa-4d04-a22d-e31b0b681b03; dId=be9b657b-ade4-4214-b9f6-cae32dd843d8; uev2.gg=true; CONSENTMGR=c1:1%7Cc2:1%7Cc3:1%7Cc4:1%7Cc5:1%7Cc6:1%7Cc7:1%7Cc8:1%7Cc9:1%7Cc10:1%7Cc11:1%7Cc12:1%7Cc13:1%7Cc14:1%7Cc15:1%7Cts:1650509233085%7Cconsent:true; _rdt_uuid=1650509233869.d01fd790-e699-4850-88fc-7886dbb5cbe3; _ts_yjad=1650509233872; uev2.loc=%7B%22address%22%3A%7B%22address1%22%3A%22%E5%9C%8B%E7%AB%8B%E8%87%BA%E5%8C%97%E5%A4%A7%E5%AD%B8%22%2C%22address2%22%3A%22%E5%A4%A7%E5%AD%B8%E8%B7%AF151%E8%99%9F%2C%20%E6%96%B0%E5%8C%97%E5%B8%82%E4%B8%89%E5%B3%BD%E5%8D%80%22%2C%22aptOrSuite%22%3A%22%22%2C%22eaterFormattedAddress%22%3A%22237%E5%8F%B0%E7%81%A3%E6%96%B0%E5%8C%97%E5%B8%82%E4%B8%89%E5%B3%BD%E5%8D%80%E5%A4%A7%E5%AD%B8%E8%B7%AF151%E8%99%9F%22%2C%22subtitle%22%3A%22%E5%A4%A7%E5%AD%B8%E8%B7%AF151%E8%99%9F%2C%20%E6%96%B0%E5%8C%97%E5%B8%82%E4%B8%89%E5%B3%BD%E5%8D%80%22%2C%22title%22%3A%22%E5%9C%8B%E7%AB%8B%E8%87%BA%E5%8C%97%E5%A4%A7%E5%AD%B8%22%2C%22uuid%22%3A%22%22%7D%2C%22latitude%22%3A24.945491%2C%22longitude%22%3A121.3732483%2C%22reference%22%3A%22ChIJdcVyt_AbaDQRDEALmxEulFo%22%2C%22referenceType%22%3A%22google_places%22%2C%22type%22%3A%22google_places%22%2C%22source%22%3A%22manual_auto_complete%22%2C%22addressComponents%22%3A%7B%22countryCode%22%3A%22TW%22%2C%22firstLevelSubdivisionCode%22%3A%22%E6%96%B0%E5%8C%97%E5%B8%82%22%2C%22city%22%3A%22%E4%B8%89%E5%B3%BD%E5%8D%80%22%2C%22postalCode%22%3A%22237%22%7D%2C%22originType%22%3A%22user_autocomplete%22%7D; _sctr=1|1651075200000; uev2.diningMode=DELIVERY; uev2.id.xp=3f66cc69-a241-4af7-8e23-a5fef464561a; uev2.id.session=ebd0ef68-6fec-41ad-8f5a-9138d4b00ff7; uev2.ts.session=1651334140807; jwt-session=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE2NTEzMzQxNDAsImV4cCI6MTY1MTQyMDU0MH0.gnLDuhsb1RXLV5q7oxjIQwtXzvwOpsYU_pPhHobaxtU; utm_medium=undefined; ext_pgvwcount=-0.1; _gid=GA1.2.1357332429.1651334142; mcd_restaurant=çµ±ä¸€è¶…å•† å¤§å³½é–€å¸‚; _userUuid=; utag_main=v_id:018049f9760700121152ab9895b105086005607e00978$_sn:18$_ss:0$_st:1651337764742$segment:b$optimizely_segment:b$_se:51$ses_id:1651334141162%3Bexp-session$_pn:13%3Bexp-session; _uetsid=fd89f5c0c89d11eca41f7795f763efd2; _uetvid=b4953960c11b11eca511fb36af225e74",
    "user-agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.4951.41 Safari/537.36 Edg/101.0.1210.32",
    "x-csrf-token":"x"
},data=json.dumps(requestData).encode("utf-8"))

with req.urlopen(request) as response:
    result=response.read().decode("utf-8")